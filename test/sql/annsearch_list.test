# name: test/sql/annsearch_list.test
# description: Test annsearch_list function lists ANN indexes from catalog
# group: [annsearch]

require annsearch

# Initially empty
query I
SELECT count(*) FROM annsearch_list();
----
0

# Create a table and DISKANN index
statement ok
CREATE TABLE test_list(id INTEGER, vec FLOAT[3]);

statement ok
INSERT INTO test_list VALUES (1, [1.0, 0.0, 0.0]), (2, [0.0, 1.0, 0.0]);

statement ok
CREATE INDEX test_idx ON test_list USING DISKANN(vec);

# annsearch_list should show the index
query III
SELECT * FROM annsearch_list();
----
test_idx	DISKANN	test_list

# Clean up
statement ok
DROP INDEX test_idx;

query I
SELECT count(*) FROM annsearch_list();
----
0
